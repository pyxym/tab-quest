const fs = require('fs');
const path = require('path');

// Create a simple colored square icon as base64 PNG
function createIcon(size) {
  // This is a minimal 1x1 pixel PNG in purple color
  const purplePixel = Buffer.from([
    0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a, // PNG signature
    0x00, 0x00, 0x00, 0x0d, 0x49, 0x48, 0x44, 0x52, // IHDR chunk
    0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x01, // 1x1 dimensions
    0x08, 0x02, 0x00, 0x00, 0x00, 0x90, 0x77, 0x53, // 8-bit RGB
    0xde, 0x00, 0x00, 0x00, 0x0c, 0x49, 0x44, 0x41, // IDAT chunk
    0x54, 0x08, 0xd7, 0x63, 0xf8, 0x8b, 0x5c, 0xf6, // Purple color data
    0x00, 0x00, 0x03, 0x5b, 0x01, 0x3e, 0xf0, 0x7b,
    0x7d, 0xc5, 0x00, 0x00, 0x00, 0x00, 0x49, 0x45, // IEND chunk
    0x4e, 0x44, 0xae, 0x42, 0x60, 0x82
  ]);
  
  return purplePixel;
}

// Create icon files
const sizes = [16, 32, 48, 128];
const assetsDir = path.join(__dirname, '..', 'assets');

if (!fs.existsSync(assetsDir)) {
  fs.mkdirSync(assetsDir, { recursive: true });
}

sizes.forEach(size => {
  const iconData = createIcon(size);
  const filename = path.join(assetsDir, `icon${size}.png`);
  fs.writeFileSync(filename, iconData);
  console.log(`Created ${filename}`);
});

// Also create the default icon.png
fs.writeFileSync(path.join(assetsDir, 'icon.png'), createIcon(128));
console.log('Created assets/icon.png');